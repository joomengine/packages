{
    "name": "File Display Engine",
    "description": "File Display Engine",
    "dynamic_get": "",
    "snippet": "0",
    "guid": "6e4e5acc-8a7c-49ca-be53-8f8d95bd4163",
    "php_view": "\/\/ Initialize\r\n$data   = $displayData['data'] ?? [];\r\n$removeDelete = $displayData['remove_delete'] ?? false;\r\n\r\n\/\/ Group images by base key (icon__, thumb__, main__)\r\n$bucket = [];\r\n$files =  [];\r\nforeach ($data as $file)\r\n{\r\n\t$key  = str_replace(['icon__', 'thumb__', 'main__'], '', $file->name);\r\n\t$type = str_starts_with($file->name, 'icon__')\r\n\t\t? 'icon'\r\n\t\t: (str_starts_with($file->name, 'thumb__')\r\n\t\t\t? 'thumb'\r\n\t\t\t: (str_starts_with($file->name, 'main__') ? 'main' : null));\r\n\r\n\tif ($type !== null) { $bucket[$key][$type] = $file; } else { $files[] = $file; }\r\n}\r\n\r\n\/\/ Extract grouped images for display\r\n$images = !empty($bucket) ? array_values($bucket) : [];",
    "add_php_view": 1,
    "layout": "<?php if (!empty($data)) : ?>\r\n<?php if (!empty($files)) : ?>\r\n<ul class=\"uk-list uk-list-divider\">\r\n<?php foreach ($files as $file) : ?>\r\n\t<li>\r\n\t<?php if ($removeDelete) : ?>\r\n\t<a class=\"uk-button uk-button-default uk-width-1-1\" href=\"<?php echo $file->link; ?>\" download>\r\n\t\t(<?php echo $file->type_name; ?>)\r\n\t\t<?php echo $file->name; ?>\r\n\t<\/a>\r\n\t<?php else : ?>\r\n\t<div id=\"<?php echo $file->guid; ?>\"\r\n\t\t class=\"uk-button-group uk-width-1-1 uk-margin-small-bottom\">\r\n\t\t<a class=\"uk-button uk-button-default uk-width-3-4\"\r\n\t\t   href=\"<?php echo $file->link; ?>\" download>\r\n\t\t\t(<?php echo $file->type_name; ?>)\r\n\t\t\t<?php echo $file->name; ?>\r\n\t\t<\/a>\r\n\t\t<button type=\"button\"\r\n\t\t\t\tclass=\"uk-button uk-button-danger uk-width-1-4\"\r\n\t\t\t\tuk-icon=\"trash\"\r\n\t\t\t\tonclick=\"VDMDeleteFile('file_vdm_uploader', '<?php echo $file->guid; ?>');\">\r\n\t\t<\/button>\r\n\t<\/div>\r\n\t<?php endif; ?>\r\n\t<\/li>\r\n<?php endforeach; ?>\r\n<\/ul>\r\n<?php endif; ?>\r\n<?php if (!empty($images)) : ?>\r\n<div class=\"uk-margin\">\r\n\t<div class=\"uk-slider-container-offset\" uk-slider>\r\n\t\t<div class=\"uk-position-relative uk-visible-toggle\">\r\n\t\t\t<div class=\"uk-slider-items uk-child-width-1-4@s\" uk-grid uk-lightbox=\"animation: slide\">\r\n\t\t\t<?php foreach ($images as $fileSet) : ?>\r\n\t\t\t<?php\r\n\t\t\t\t$name       = $fileSet['main']->name ?? 'unknown';\r\n\t\t\t\t$mainGuid   = $fileSet['main']->guid ?? null;\r\n\t\t\t\t$thumbGuid  = $fileSet['thumb']->guid ?? null;\r\n\t\t\t\t$iconGuid   = $fileSet['icon']->guid ?? null;\r\n\t\t\t\t$mainLink   = $fileSet['main']->link ?? null;\r\n\t\t\t\t$thumbLink  = $fileSet['thumb']->link ?? null;\r\n\t\t\t\t$iconLink   = $fileSet['icon']->link ?? null;\r\n\t\t\t\t$mediaLink  = $mainLink ?? $thumbLink ?? $iconLink;\r\n\t\t\t\t$deleteList = array_filter([$mainGuid, $thumbGuid, $iconGuid]);\r\n\t\t\t\t$buttonSize = count($deleteList);\r\n\t\t\t?>\r\n\t\t\t<div id=\"<?php echo $mainGuid ?? uniqid('img_'); ?>\">\r\n\t\t\t\t<div class=\"uk-card uk-card-body uk-box-shadow-small uk-box-shadow-hover-large\">\r\n\t\t\t\t\t<div class=\"uk-card-media-top\">\r\n\t\t\t\t\t\t<a class=\"uk-inline\"\r\n\t\t\t\t\t\t   href=\"<?php echo $mainLink ?? $mediaLink; ?>\"\r\n\t\t\t\t\t\t   data-caption=\"<?php echo $name; ?>\">\r\n\t\t\t\t\t\t\t<img src=\"<?php echo $mediaLink; ?>\"\r\n\t\t\t\t\t\t\t\t width=\"600\"\r\n\t\t\t\t\t\t\t\t height=\"600\"\r\n\t\t\t\t\t\t\t\t alt=\"<?php echo $name; ?>\">\r\n\t\t\t\t\t\t<\/a>\r\n\t\t\t\t\t<\/div>\r\n\r\n\t\t\t\t\t<div class=\"uk-card-body uk-padding-remove\">\r\n\t\t\t\t\t\t<div class=\"uk-margin\">\r\n\t\t\t\t\t\t\t<div class=\"uk-button-group uk-width-1-1\">\r\n\t\t\t\t\t\t\t<?php if ($mainLink) : ?>\r\n\t\t\t\t\t\t\t\t<a class=\"uk-button uk-button-primary uk-button-small uk-width-1-<?php echo $buttonSize; ?>\"\r\n\t\t\t\t\t\t\t\t   href=\"<?php echo $mainLink; ?>\" download>\r\n\t\t\t\t\t\t\t\t\t<?php echo Text::_('Large'); ?>\r\n\t\t\t\t\t\t\t\t<\/a>\r\n\t\t\t\t\t\t\t<?php endif; ?>\r\n\r\n\t\t\t\t\t\t\t<?php if ($thumbLink) : ?>\r\n\t\t\t\t\t\t\t\t<a class=\"uk-button uk-button-primary uk-button-small uk-width-1-<?php echo $buttonSize; ?>\"\r\n\t\t\t\t\t\t\t\t   href=\"<?php echo $thumbLink; ?>\" download>\r\n\t\t\t\t\t\t\t\t\t<?php echo Text::_('Thumb'); ?>\r\n\t\t\t\t\t\t\t\t<\/a>\r\n\t\t\t\t\t\t\t<?php endif; ?>\r\n\r\n\t\t\t\t\t\t\t<?php if ($iconLink) : ?>\r\n\t\t\t\t\t\t\t\t<a class=\"uk-button uk-button-primary uk-button-small uk-width-1-<?php echo $buttonSize; ?>\"\r\n\t\t\t\t\t\t\t\t   href=\"<?php echo $iconLink; ?>\" download>\r\n\t\t\t\t\t\t\t\t\t<?php echo Text::_('Icon'); ?>\r\n\t\t\t\t\t\t\t\t<\/a>\r\n\t\t\t\t\t\t\t<?php endif; ?>\r\n\t\t\t\t\t\t\t<\/div>\r\n\t\t\t\t\t\t<\/div>\r\n\t\t\t\t\t<\/div>\r\n\r\n\t\t\t\t\t<div class=\"uk-card-footer\">\r\n\t\t\t\t\t\t<button class=\"uk-button uk-button-danger uk-width-1-1\"\r\n\t\t\t\t\t\t\ttype=\"button\" uk-icon=\"trash\"\r\n\t\t\t\t\t\t\tonclick=\"VDMDeleteFiles('file_vdm_uploader', <?php echo $this->escape(json_encode($deleteList)); ?>);\">\r\n\t\t\t\t\t\t<\/button>\r\n\t\t\t\t\t<\/div>\r\n\t\t\t\t<\/div>\r\n\t\t\t<\/div>\r\n\t\t\t<?php endforeach; ?>\r\n\t\t\t<\/div>\r\n\t\t<\/div>\r\n\t\t<ul class=\"uk-slider-nav uk-dotnav uk-flex-center uk-margin\"><\/ul>\r\n\t<\/div>\r\n<\/div>\r\n<?php endif; ?>\r\n<?php endif; ?>",
    "libraries": null,
    "alias": "demolookfiledisplay"
}