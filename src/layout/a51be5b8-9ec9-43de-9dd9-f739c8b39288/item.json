{
    "name": "Importer Columns Display",
    "description": "Importer Columns Display",
    "dynamic_get": "",
    "snippet": "0",
    "guid": "a51be5b8-9ec9-43de-9dd9-f739c8b39288",
    "php_view": "$headers = null;\r\n$file = null;\r\n\r\n\/\/ Check if 'data' exists and is an array with at least one file\r\nif (!empty($displayData['data']) && is_array($displayData['data']))\r\n{\r\n\t\/\/ Retrieve the first file\r\n\t$file = array_values($displayData['data'])[0];\r\n\r\n\t\/\/ Fetch the headers for the file\r\n\tif (is_object($file) && isset($file->file_path))\r\n\t{\r\n\t\t$headers = Super___ff8d5fdb_2d1f_4178_bd18_a43b8efd1068___Power::_('Spreadsheet.Header')->get($file->file_path);\r\n\t}\r\n}\r\n\r\n\/\/ Helper function to append a field to a form element\r\nfunction appendFieldToForm(\\SimpleXMLElement $form, array $attributes) {\r\n\t\/\/ Create the field XML element\r\n\t$fieldXML = new \\SimpleXMLElement('<field\/>');\r\n\t\/\/ Set attributes for the field\r\n\tSuper___1198aecf_84c6_45d2_aea8_d531aa4afdfa___Power::attributes($fieldXML, $attributes);\r\n\t\/\/ Append the field XML to the form\r\n\tSuper___1198aecf_84c6_45d2_aea8_d531aa4afdfa___Power::append($form, $fieldXML);\r\n}\r\n\r\n\/\/ Initialize the FORM if we have headers\r\n$map = null;\r\nif (!empty($headers))\r\n{\r\n\t\/\/ we update the global headers\r\n\tJoomla___aebfeb9f_f8a3_42be_a21d_5db56ae30c1c___Power::setSpreadsheetHeaders($headers);\r\n\r\n\t\/\/ get subform values\r\n\t$values = Joomla___aebfeb9f_f8a3_42be_a21d_5db56ae30c1c___Power::getItemImportSubformValues();\r\n\r\n\t\/\/ get the amount of rows expected\r\n\t$rows = count($headers);\r\n\r\n\t\/\/ Add the component field prefix\r\n\tJoomla___571422c4_0340_49f8_b846_5729c7af6ed7___Power::addFieldPrefix('[[[NamespacePrefix]]]\\Component\\[[[ComponentNamespace]]]\\Administrator\\Field');\r\n\t\/\/ Add the component rule prefix\r\n\tJoomla___571422c4_0340_49f8_b846_5729c7af6ed7___Power::addRulePrefix('[[[NamespacePrefix]]]\\Component\\[[[ComponentNamespace]]]\\Administrator\\Rule');\r\n\r\n\t\/\/ ADD any other field HERE that needs specail attention !!!\r\n\r\n\t\/\/ Load the map 'subform' field type\r\n\t$map = Joomla___571422c4_0340_49f8_b846_5729c7af6ed7___Power::loadFieldType('subform', true);\r\n\r\n\t\/\/ Create the root field element for the subform XML\r\n\t$mapXML = new \\SimpleXMLElement('<field\/>');\r\n\t\r\n\t\/\/ Define the attributes for the subform field\r\n\t$mapAttributes = [\r\n\t\t'type' => 'subform',\r\n\t\t'name' => 'maps',\r\n\t\t'label' => JustTEXT::_('Map'),\r\n\t\t'layout' => 'joomla.form.field.subform.repeatable-table',\r\n\t\t'buttons' => 'false',\r\n\t\t'multiple' => 'true',\r\n\t\t'icon' => 'list',\r\n\t\t'min' => $rows,\r\n\t\t'max' => $rows\r\n\t];\r\n\r\n\t\/\/ Set the attributes for the subform field\r\n\tSuper___1198aecf_84c6_45d2_aea8_d531aa4afdfa___Power::attributes($mapXML, $mapAttributes);\r\n\r\n\t\/\/ Add the child form element inside the subform\r\n\t$childForm = $mapXML->addChild('form');\r\n\t\r\n\t\/\/ Define the attributes for the child form\r\n\t$childFormAttributes = [\r\n\t\t'hidden' => 'true',\r\n\t\t'name' => 'list_maps_modal',\r\n\t\t'repeat' => 'true'\r\n\t];\r\n\r\n\t\/\/ Set the attributes for the child form\r\n\tSuper___1198aecf_84c6_45d2_aea8_d531aa4afdfa___Power::attributes($childForm, $childFormAttributes);\r\n\r\n\t\/\/ Build and append column field XML to the child form\r\n\tappendFieldToForm($childForm, [\r\n\t\t'type' => 'importcolumns',\r\n\t\t'name' => 'column',\r\n\t\t'label' => JustTEXT::_('Column'),\r\n\t\t'description' => JustTEXT::_('The spreadsheet columns.'),\r\n\t\t'class' => 'list_class',\r\n\t\t'readonly' => 'true',\r\n\t\t'layout' => 'joomla.form.field.list-fancy-select'\r\n\t]);\r\n\r\n\t\/\/ Build and append target field XML to the child form\r\n\tappendFieldToForm($childForm, [\r\n\t\t'type' => 'targetfields',\r\n\t\t'name' => 'target',\r\n\t\t'label' => JustTEXT::_('System Target Fields'),\r\n\t\t'description' => JustTEXT::_('The system target database fields.'),\r\n\t\t'message' => JustTEXT::_('Input Required'),\r\n\t\t'class' => 'list_class',\r\n\t\t'layout' => 'joomla.form.field.list-fancy-select'\r\n\t]);\r\n\r\n\t\/\/ Setup the subform with the constructed XML\r\n\t$map->setup($mapXML, $values, 'vdm_import');\r\n}",
    "add_php_view": 1,
    "layout": "<?php echo LayoutHelper::render('filedisplay', $displayData); ?>\r\n<?php if ($map === null): ?>\r\n\t<?php echo Text::_('Spreadsheet seems to have no headers set! There was an error!'); ?>\r\n<?php else: ?>\r\n\t<div id=\"subform-display-area\">\r\n\r\n\t\t<?php echo $map->input; ?>\r\n\r\n\t\t<input type=\"hidden\" name=\"vdm_import[file]\" value=\"<?php echo $file->guid; ?>\">\r\n\r\n\t\t<joomla-toolbar-button id=\"toolbar-download-custom-button-saveimportmap\" task=\"importer.saveImportMap\">\r\n\t\t\t<div class=\"d-grid\">\r\n\t\t\t\t<button class=\"button-download custom-button-saveimportmap btn btn-primary\" type=\"button\">\r\n\t\t\t\t\t<span class=\"icon-download custom-button-saveimportmap\" aria-hidden=\"true\"><\/span>\r\n\t\t\t\t\t<?php echo Text::_('Import'); ?>\r\n\t\t\t\t<\/button>\r\n\t\t\t<\/div>\r\n\t\t<\/joomla-toolbar-button>\r\n\t<\/div>\r\n<?php endif;  ?>",
    "libraries": null,
    "alias": "importercolumnsdisplay",
    "@dependencies": [
        {
            "key": "guid",
            "value": "c9d68d44-c737-4eea-a465-2928eaa12537",
            "entity": "layout",
            "table": "#__componentbuilder_layout",
            "direction": "out"
        }
    ]
}